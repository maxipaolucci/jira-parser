<!DOCTYPE html>
<html lang="en" ng-app="printjira">
<head>
    <meta charset="UTF-8">
    <link href="/css/styles.css" rel="stylesheet">
    <title>Print Jira</title>

</head>
<body >
    <div ng-controller="mainController as mainCtrl">
        <!-- login form container -->
        <div class="login-container non-printable">
            <div ng-hide="logedIn" class="">
                Jira user: <input type="text" ng-model="jiraUser" />
                Jira password: <input type="password" ng-model="jiraPass" />
                <button type="button" ng-click="login()">Login</button>
                <loading-icon class="loading-icon--login"></loading-icon>
            </div>
            <div ng-show="logedIn">
                <span class="logedIn-name">Welcome {{jiraUser}}!</span>
                <button type="button" ng-click="logout()">Logout</button>
            </div>
        </div>
        <div class="clearfix"></div>

        <!-- App Title -->
        <h1 class="app-title non-printable">Jira Cards</h1>

        <!-- Ticket form container -->
        <div class="ticket-form-container non-printable" >
            Ticket numbers (comma separated): <input ng-disabled="!logedIn" type="text" ng-model="issueNumbers" size="100" />
            <button type="button" ng-click="findJiraIssues()" ng-disabled="!logedIn">Submit</button>
            <button type="button" ng-click="openPdf()" ng-disabled="!logedIn || !tasks.length">Open PDF</button>
            <button type="button" ng-click="printPdf()" ng-disabled="!logedIn || !tasks.length">Print PDF</button>
            <button type="button" ng-click="downloadPdf()" ng-disabled="!logedIn || !tasks.length">Save PDF</button>

            <div class="color-controls">
                Task color: <input class="jscolor" ng-model="taskColor">
                Subtask color: <input class="jscolor" ng-model="subtaskColor">
            </div>
        </div>

        <!-- Ticket cards container -->
        <div class="jira-tiles">
            <loading-icon class="loading-icon--tasks"></loading-icon>
            <div class="jira-task-container" ng-repeat="task in tasks">
                <h3>{{task.key}}</h3>
                <div class="jira-task">
                    <div class="id" style="background-color: #{{taskColor}};">{{task.key}}</div>
                    <div class="summary">{{task.fields.summary}}</div>
                </div>

                <div class="jira-task jira-task--subtask" ng-repeat="subtask in task.fields.subtasks">
                    <div class="id" style="background-color: #{{subtaskColor}};">{{subtask.key}}</div>
                    <div class="summary">{{subtask.fields.summary}}</div>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>


    <!-- ////////////////////////////////////// SCRIPTS //////////////////////////////////////// -->
    <!-- LIBRARIES -->
    <script src="/js/lib/jquery.js"></script>
    <script src="/js/lib/angular.js"></script>
    <script src="/js/lib/jscolor.min.js"></script>
    <script src="/js/lib/pdfmake.min.js"></script>
    <script src="/js/lib/vfs_fonts.js"></script>

    <!-- MAIN -->
    <script src="/js/main.js"></script>

    <!-- SERVICES -->
    <script src="/js/services/jiraIssueServices.js"></script>

    <!-- DIRECTIVES -->
    <script src="/js/directives/loading-icon/loading-icon.component.js"></script>

    <!-- CONTROLLERS -->
    <script src="/js/controllers/mainController.js"></script>
</body>
</html>